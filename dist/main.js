(()=>{"use strict";!function(){let e=[];const t=document.querySelector("#bookList"),n=document.querySelector("#newBookFormDiv"),o=document.querySelector("#newBookButton"),i=document.querySelector("#clearLibrary"),c=document.createElement("form"),d=document.createElement("input");d.setAttribute("type","text"),d.setAttribute("placeholder","Title"),d.setAttribute("id","newTitle");const l=document.createElement("input");l.setAttribute("type","text"),l.setAttribute("placeholder","Author"),l.setAttribute("id","newAuthor");const a=document.createElement("input");a.setAttribute("type","text"),a.setAttribute("placeholder","# of pages"),a.setAttribute("id","newNumPages");const r=document.createElement("label");r.textContent="Have you read it?";const u=document.createElement("input");u.setAttribute("type","checkbox"),u.setAttribute("id","newHaveRead");const s=document.createElement("input");function m(e,t,n,o){this.title=e,this.author=t,this.numPages=n,this.haveRead=o}function p(){for(;t.firstChild;)t.removeChild(t.firstChild);for(let n of e){const o=document.createElement("div");o.setAttribute("class","bookCardDiv"),o.setAttribute("id",`book${e.indexOf(n)}`),t.appendChild(o);const i=document.createElement("div");i.setAttribute("class","bookTitleDiv"),o.appendChild(i),i.textContent=`${n.title}`;const c=document.createElement("div");c.setAttribute("class","bookAuthorDiv"),o.appendChild(c),c.textContent=`${n.author}`;const d=document.createElement("div");d.setAttribute("class","bookPagesDiv"),o.appendChild(d),d.textContent=`${n.numPages} pages`;const l=document.createElement("div");l.setAttribute("class","buttonDiv"),o.appendChild(l),l.textContent="Read it?";const a=document.createElement("label");a.setAttribute("class","switch");const r=document.createElement("input");r.setAttribute("type","checkbox");const u=document.createElement("span");u.setAttribute("class","slider round"),l.appendChild(a),a.appendChild(r),a.appendChild(u),n.haveRead?r.checked=!0:r.checked=!1,r.addEventListener("change",(function(){r.checked?n.haveRead=!0:n.haveRead=!1,h()}));const s=document.createElement("button");s.setAttribute("class","delButton"),l.appendChild(s),s.textContent="x",s.onclick=function(){t.removeChild(o),e.splice(e.indexOf(n),1),h(),console.table(e)}}}function h(){localStorage.setItem("mySavedLibrary",JSON.stringify(e))}s.setAttribute("type","button"),s.setAttribute("value","Submit"),o.addEventListener("click",(function(){c.reset(),n.appendChild(c),c.appendChild(d),c.appendChild(l),c.appendChild(a),c.appendChild(r),c.appendChild(u),c.appendChild(s)})),i.addEventListener("click",(function(){"yes"===prompt("Are you sure? (type 'yes')")&&(localStorage.clear(),e=[],p())})),s.addEventListener("click",(function(){if(function(){let t=document.getElementById("newTitle").value,n=!1;return e.forEach((function(e){console.log(t),console.log(e.title),t.toLowerCase()===e.title.toLowerCase()&&(n=!0)})),!!n}())alert("Already in your library!");else for(function(){let t=document.getElementById("newTitle").value,n=document.getElementById("newAuthor").value,o=document.getElementById("newNumPages").value,i=!1;i=!!document.getElementById("newHaveRead").checked;const c=new m(t,n,o,i);e.push(c),h()}(),p();n.firstChild;)n.removeChild(n.firstChild)})),document.addEventListener("DOMContentLoaded",(function(){localStorage.getItem("mySavedLibrary")&&(alert("Found saved library."),e=JSON.parse(localStorage.getItem("mySavedLibrary")),p())}))}()})();