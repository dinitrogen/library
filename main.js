(()=>{"use strict";!function(){let e=[];const t=document.querySelector("#bookList"),n=document.querySelector("#newBookFormDiv");document.querySelector("#newBookButton").addEventListener("click",(function(){i.reset(),n.appendChild(i),i.appendChild(o),i.appendChild(d),i.appendChild(a),i.appendChild(l),i.appendChild(r),i.appendChild(s)})),document.querySelector("#clearLibrary").addEventListener("click",(function(){"yes"===prompt("Are you sure? (type 'yes')")&&(localStorage.clear(),e=[],u())}));const i=document.createElement("form"),o=document.createElement("input");o.setAttribute("type","text"),o.setAttribute("placeholder","Title"),o.setAttribute("id","newTitle"),o.setAttribute("required","true");const d=document.createElement("input");d.setAttribute("type","text"),d.setAttribute("placeholder","Author"),d.setAttribute("id","newAuthor"),d.setAttribute("required","true");const a=document.createElement("input");a.setAttribute("type","number"),a.setAttribute("placeholder","# of pages"),a.setAttribute("id","newNumPages"),a.setAttribute("required","true");const l=document.createElement("label");l.textContent="Have you read it?";const r=document.createElement("input");r.setAttribute("type","checkbox"),r.setAttribute("id","newHaveRead");const s=document.createElement("button");s.textContent="Submit",s.addEventListener("click",(function(){if(o.validity.valueMissing?o.setCustomValidity("Please enter a title."):function(){let t=document.getElementById("newTitle").value,n=!1;return e.forEach((function(e){console.log(t),console.log(e.title),t.toLowerCase()===e.title.toLowerCase()&&(n=!0)})),!!n}()?o.setCustomValidity("Already in your library!"):o.setCustomValidity(""),d.validity.valueMissing?d.setCustomValidity("Please enter an author."):d.setCustomValidity(""),a.validity.valueMissing?a.setCustomValidity("Please enter # of pages."):a.setCustomValidity(""),o.validity.valid&&d.validity.valid&&a.validity.valid)for(function(){let t=document.getElementById("newTitle").value,n=document.getElementById("newAuthor").value,i=document.getElementById("newNumPages").value,o=!1;o=!!document.getElementById("newHaveRead").checked;const d=new c(t,n,i,o);e.push(d),m()}(),u();n.firstChild;)n.removeChild(n.firstChild)}));class c{constructor(e,t,n,i){this.title=e,this.author=t,this.numPages=n,this.haveRead=i}}function u(){for(;t.firstChild;)t.removeChild(t.firstChild);for(let n of e){const i=document.createElement("div");i.setAttribute("class","bookCardDiv"),i.setAttribute("id",`book${e.indexOf(n)}`),t.appendChild(i);const o=document.createElement("div");o.setAttribute("class","bookTitleDiv"),i.appendChild(o),o.textContent=`${n.title}`;const d=document.createElement("div");d.setAttribute("class","bookAuthorDiv"),i.appendChild(d),d.textContent=`${n.author}`;const a=document.createElement("div");a.setAttribute("class","bookPagesDiv"),i.appendChild(a),a.textContent=`${n.numPages} pages`;const l=document.createElement("div");l.setAttribute("class","buttonDiv"),i.appendChild(l),l.textContent="Read it?";const r=document.createElement("label");r.setAttribute("class","switch");const s=document.createElement("input");s.setAttribute("type","checkbox");const c=document.createElement("span");c.setAttribute("class","slider round"),l.appendChild(r),r.appendChild(s),r.appendChild(c),n.haveRead?s.checked=!0:s.checked=!1,s.addEventListener("change",(function(){s.checked?n.haveRead=!0:n.haveRead=!1,m()}));const u=document.createElement("button");u.setAttribute("class","delButton"),l.appendChild(u),u.textContent="x",u.onclick=function(){t.removeChild(i),e.splice(e.indexOf(n),1),m(),console.table(e)}}}function m(){localStorage.setItem("mySavedLibrary",JSON.stringify(e))}document.addEventListener("DOMContentLoaded",(function(){localStorage.getItem("mySavedLibrary")&&(alert("Found saved library."),e=JSON.parse(localStorage.getItem("mySavedLibrary")),u())}))}()})();